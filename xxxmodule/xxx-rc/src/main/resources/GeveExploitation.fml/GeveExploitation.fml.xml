<?xml version="1.0" encoding="UTF-8"?>
<VirtualModel id="FLX-2" modelVersion="1.0" uri="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint" version="0.1" bigIconResource="../Icons/GEVE_64x64.png" smallIconResource="../Icons/GEVE_16x16.png" name="GeveExploitation" mediumIconResource="../Icons/GEVE_32x32.png" userID="FLX" flexoID="2">
  <FMLLocalizedDictionary id="SYL-73" userID="SYL" flexoID="73" />
  <UseModelSlotDeclaration id="0" modelSlotClass="org.openflexo.foundation.fml.rt.FMLRTVirtualModelInstanceModelSlot" userID="FLX" flexoID="-1" />
  <UseModelSlotDeclaration id="1" modelSlotClass="org.openflexo.technologyadapter.jdbc.HbnModelSlot" userID="SYL" flexoID="-1" />
  <Inspector id="FLX-1" inspectorTitle="GeveExploitation" userID="FLX" flexoID="1" />
  <FMLRTVirtualModelInstanceModelSlot id="FLX-6" virtualModelURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/DonneesReferentiel.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="donneesReferentiel" userID="FLX" flexoID="6" />
  <FMLRTVirtualModelInstanceModelSlot id="FLX-32" virtualModelURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/Caracterisations.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="caracterisations" userID="FLX" flexoID="32" />
  <GetSetProperty id="FLX-21" name="referentielsTiers" userID="FLX" flexoID="21">
    <SetControlGraph_EmptyControlGraph id="FLX-28" ownerContext="setControlGraph" userID="FLX" flexoID="28" />
    <GetControlGraph_ReturnStatement id="FLX-25" ownerContext="getControlGraph" userID="FLX" flexoID="25">
      <AssignableAction_SelectVirtualModelInstance id="FLX-24" container="this" virtualModelTypeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/ReferentielTiers.fml" receiver="this" userID="FLX" flexoID="24" />
    </GetControlGraph_ReturnStatement>
  </GetSetProperty>
  <HbnModelSlot id="SYL-57" virtualModelURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/NessyDB.fml" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="db" userID="SYL" flexoID="57" />
  <CreationScheme id="FLX-7" name="create" width="800" label="create" height="600" userID="FLX" flexoID="7">
    <BehaviourControlGraph_Sequence id="FLX-20" userID="FLX" flexoID="20">
      <ControlGraph2_Sequence id="FLX-36" ownerContext="controlGraph2" userID="FLX" flexoID="36">
        <ControlGraph2_Sequence id="SYL-64" ownerContext="controlGraph2" userID="SYL" flexoID="64">
          <ControlGraph2_Sequence id="SYL-90" ownerContext="controlGraph2" userID="SYL" flexoID="90">
            <ControlGraph2_Sequence id="SYL-96" ownerContext="controlGraph2" userID="SYL" flexoID="96">
              <ControlGraph2_AssignationAction id="SYL-63" assign="db" ownerContext="controlGraph2" userID="SYL" flexoID="63">
                <AssignableAction_CreateHbnResource id="SYL-62" creationSchemeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/NessyDB.fml.create" connection="connection" resourceCenter="this.resourceCenter" relativePath="" resourceName="(this.name + &quot;_NessyDB&quot;)" receiver="null" userID="SYL" flexoID="62" />
              </ControlGraph2_AssignationAction>
              <ControlGraph1_LogAction id="SYL-95" logLevel="INFO" logString="(&quot;Created connection &quot; + connection)" ownerContext="controlGraph1" userID="SYL" flexoID="95" />
            </ControlGraph2_Sequence>
            <ControlGraph1_DeclarationAction id="SYL-89" variable="connection" ownerContext="controlGraph1" userID="SYL" flexoID="89">
              <AssignableAction_CreateJDBCConnection id="SYL-84" password="parameters.jdbcPwd" address="parameters.jdbcAddress" dbtype="HSQLDB" user="parameters.jdbcUser" resourceCenter="this.resourceCenter" relativePath="" resourceName="&quot;NessyConnection.jdbc&quot;" receiver="null" ownerContext="controlGraph1" userID="SYL" flexoID="84" />
            </ControlGraph1_DeclarationAction>
          </ControlGraph2_Sequence>
          <ControlGraph1_AssignationAction id="FLX-35" assign="caracterisations" ownerContext="controlGraph1" userID="FLX" flexoID="35">
            <AssignableAction_AddVirtualModelInstance id="FLX-34" virtualModelInstanceTitle="&quot;Caracterisations&quot;" virtualModelInstanceName="&quot;Caracterisations&quot;" creationSchemeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/Caracterisations.fml.create" receiver="this" userID="FLX" flexoID="34" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_IterationAction id="FLX-16" iteratorName="unTiers" ownerContext="controlGraph1" userID="FLX" flexoID="16">
          <Iteration_ExpressionAction id="FLX-18" expression="donneesReferentiel.tiers" ownerContext="iterationControlGraph" userID="FLX" flexoID="18" />
          <ControlGraph_AddVirtualModelInstance id="FLX-27" virtualModelInstanceTitle="(&quot;ReferentielTiers-&quot; + unTiers.nom)" virtualModelInstanceName="(&quot;ReferentielTiers-&quot; + unTiers.nom)" creationSchemeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/ReferentielTiers.fml.create" receiver="this" ownerContext="controlGraph" userID="FLX" flexoID="27">
            <AddFlexoConceptInstanceParameter id="FLX-12" paramName="tiers" value="unTiers" userID="FLX" flexoID="12" />
          </ControlGraph_AddVirtualModelInstance>
        </ControlGraph1_IterationAction>
      </ControlGraph2_Sequence>
      <ControlGraph1_AssignationAction id="FLX-11" assign="donneesReferentiel" ownerContext="controlGraph1" userID="FLX" flexoID="11">
        <AssignableAction_AddVirtualModelInstance id="FLX-10" virtualModelInstanceTitle="&quot;DonneesReferentiel&quot;" virtualModelInstanceName="&quot;DonneesReferentiel&quot;" creationSchemeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/DonneesReferentiel.fml.create" receiver="this" userID="FLX" flexoID="10" />
      </ControlGraph1_AssignationAction>
    </BehaviourControlGraph_Sequence>
    <GenericBehaviourParameter id="XTO-78" widget="TEXT_FIELD" defaultValue="&quot;sa&quot;" name="jdbcUser" type="java.lang.String" userID="XTO" flexoID="78" />
    <GenericBehaviourParameter id="XTO-77" widget="TEXT_FIELD" defaultValue="&quot;&quot;" name="jdbcPwd" type="java.lang.String" description="" userID="XTO" flexoID="77" />
    <GenericBehaviourParameter id="XTO-79" widget="TEXT_FIELD" defaultValue="&quot;jdbc:hsqldb:mem:db&quot;" name="jdbcAddress" type="java.lang.String" userID="XTO" flexoID="79" />
  </CreationScheme>
  <ActionScheme id="FLX-40" name="getReferentiel" width="800" label="getReferentiel" height="600" userID="FLX" flexoID="40">
    <BehaviourControlGraph_Sequence id="FLX-52" userID="FLX" flexoID="52">
      <ControlGraph2_ConditionalAction id="FLX-47" condition="(list.size &gt; 0)" ownerContext="controlGraph2" userID="FLX" flexoID="47">
        <ElseControlGraph_ReturnStatement id="FLX-51" ownerContext="elseControlGraph" userID="FLX" flexoID="51">
          <AssignableAction_ExpressionAction id="FLX-50" expression="null" userID="FLX" flexoID="50" />
        </ElseControlGraph_ReturnStatement>
        <ThenControlGraph_ReturnStatement id="FLX-49" ownerContext="thenControlGraph" userID="FLX" flexoID="49">
          <AssignableAction_ExpressionAction id="FLX-48" expression="list.get(0)" userID="FLX" flexoID="48" />
        </ThenControlGraph_ReturnStatement>
      </ControlGraph2_ConditionalAction>
      <ControlGraph1_DeclarationAction id="FLX-45" variable="list" ownerContext="controlGraph1" userID="FLX" flexoID="45">
        <AssignableAction_SelectVirtualModelInstance id="FLX-43" container="this" virtualModelTypeURI="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/ReferentielTiers.fml" receiver="this" userID="FLX" flexoID="43">
          <Condition id="FLX-44" condition="(selected.tiers = parameters.tiers)" userID="FLX" flexoID="44" />
        </AssignableAction_SelectVirtualModelInstance>
      </ControlGraph1_DeclarationAction>
    </BehaviourControlGraph_Sequence>
    <GenericBehaviourParameter id="FLX-53" widget="CUSTOM_WIDGET" name="tiers" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;http://geve.guyotenvironnement.com/GeveExploitation.viewpoint/DonneesReferentiel.fml#Tiers&gt;" userID="FLX" flexoID="53" />
  </ActionScheme>
  <DeletionScheme id="SYL-68" name="delete" width="800" label="delete" height="600" userID="SYL" flexoID="68">
    <BehaviourControlGraph_EmptyControlGraph id="SYL-69" userID="SYL" flexoID="69" />
  </DeletionScheme>
</VirtualModel>
