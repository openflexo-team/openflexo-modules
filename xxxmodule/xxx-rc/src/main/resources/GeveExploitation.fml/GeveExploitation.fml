use org.openflexo.foundation.fml.rt.FMLRTVirtualModelInstanceModelSlot;
use org.openflexo.technologyadapter.jdbc.HbnModelSlot;

/**
 * 
 * @version 0.1
 */
@VirtualModel(uri="http://geve.guyotenvironnement.com/GeveExploitation.viewpoint")
public class GeveExploitation {

  @FMLRTVirtualModelInstanceModelSlot(cardinality=ZeroOne,readOnly=false)  
  public VirtualModelInstanceType<DonneesReferentiel> donneesReferentiel;
  @FMLRTVirtualModelInstanceModelSlot(cardinality=ZeroOne,readOnly=false)  
  public VirtualModelInstanceType<Caracterisations> caracterisations;
  @GetSetProperty(value="referentielsTiers", access=get)  
  public List<VirtualModelInstanceType<ReferentielTiers>> getReferentielsTiers {  
    return this.FML@RT::SelectVirtualModelInstance();  
  }
  @HbnModelSlot(cardinality=ZeroOne,readOnly=false)  
  public HbnVirtualModelInstanceType<NessyDB> db;

  @CreationScheme  
  GeveExploitation:create(String jdbcUser, String jdbcPwd, String jdbcAddress) {  
    donneesReferentiel = DonneesReferentiel.create();    
    for (unTiers : donneesReferentiel.tiers) {    
      ReferentielTiers.create(unTiers)    
    }    
    caracterisations = Caracterisations.create();    
    JDBCConnection connection = null.CreateJDBCConnection();    
    log ("Created connection " + connection)    
    db = null.CreateHbnResource();  
  }  

  @ActionScheme  
  VirtualModelInstanceType<ReferentielTiers> getReferentiel(FlexoConceptInstanceType<Tiers> tiers) {  
    List<VirtualModelInstanceType<ReferentielTiers>> list = this.FML@RT::SelectVirtualModelInstance where=(selected.tiers = parameters.tiers);    
    if (list.size > 0) {    
      return list.get(0);    
    } else {    
      return null;    
    }  
  }  

  @DeletionScheme  
  Void delete() {  
  
  }  

}
